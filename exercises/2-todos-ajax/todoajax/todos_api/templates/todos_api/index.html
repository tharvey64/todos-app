{% extends "todos_api/base.html" %}
    
{% block content %}
    <div class="start">
        <form id="sign_in" name="new" action="/todos/sign_in/" method="POST">
            <fieldset form="sign_in">
            <legend>Log In or</legend>
            Username: <input type="text" name="username">
            <br></br>
            Password: <input type="text" name="password"><br></br>
            <input type="submit" value="Sign In">
            </fieldset>
        </form>
    </div>

    <div class="access">
        <a id="log_out" href="/todos/log_out/">Log Out</a>
    </div>

    <div class="start">
        <form id="new_user" name="new" action="/todos/new_user/" method="POST">
            <fieldset form="new_user">
            <legend>Sign up</legend>
            Username: <input type="text" name="username">
            <br></br>
            Password: <input type="text" name="password"><br></br>
            <input type="submit" value="Register">
            </fieldset>
        </form>
    </div>

    {%verbatim%}
    {{#key}}
    <script id="user-key" type="text/template">
    <div class="access">

        
        <form id="add_form" name="add" action="/todos/add_todo/{{key}}/" method="POST">
            <fieldset form="add_form">
            <legend>Add to your todo list</legend>
            Task: <br></br>
            <input type="text" name="name"><br></br>
            Goal: <br></br>
            <textarea name="description" form="add_form"></textarea><br></br>
            <input type="submit" value="Add">
            </fieldset>
        </form>
    </div>

    {{/key}}
    </script>
    {%endverbatim%}

    <div class="access">
        <form id="update_form" name="add" action="/todos/update/" method="POST">
            <fieldset form="update_form">
            <legend>Edit Task</legend>
            Task: <br></br>
            <input type="text" name="name" value={{ todo.description }}><br></br>
            Goal: <br></br>
            <textarea name="description" form="add_form">{{ todo.description }}</textarea><br></br>
            <input type="submit" value="Update">
            </fieldset>
        </form>
    </div>

    <div class="access">
        {%verbatim%}
        <script id="todo-template" type="text/template">
        {{#todos}}
        <div class = "todo">
            <p>{{todo_text}}</p>
            <p>Completed: {{completed}}</p>
        </div>
        {{/todos}}
        </script>
        {%endverbatim%}
    </div>

    <div class="access">
        <a id="delete" href="/todos/delete/{{ user.username }}/{{ todo.id }}">Delete</a>
    </div>
{% endblock %}
